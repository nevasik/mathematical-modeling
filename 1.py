import random
import math
import matplotlib.pyplot as plt

def generate_arrivals(T, arrivals_min, arrivals_max):
    """
    –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –ª—é–¥–µ–π –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ 0..T (–∫–∞–∂–¥–∞—è –µ–¥–∏–Ω–∏—Ü–∞ - –º–∏–Ω—É—Ç–∞).
    arrivals_min, arrivals_max: int, –≥—Ä–∞–Ω–∏—Ü—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.

    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫, –≥–¥–µ i-–π —ç–ª–µ–º–µ–Ω—Ç - —á–∏—Å–ª–æ –ª—é–¥–µ–π, –ø—Ä–∏—à–µ–¥—à–∏—Ö –≤ –º–∏–Ω—É—Ç—É i.
    """
    arrivals = []
    for _ in range(T):
        # —Å–ª—É—á–∞–π–Ω–æ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –∏–∑ [arrivals_min, arrivals_max]
        a = random.randint(arrivals_min, arrivals_max)
        arrivals.append(a)
    return arrivals

def generate_service_times(num_people, mode='uniform', param1=2.0, param2=5.0):
    """
    –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –¥–ª—è num_people —á–µ–ª–æ–≤–µ–∫.
    mode='uniform': —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ [param1, param2].
    mode='exp': —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º mu = param1 (—Ç–æ–≥–¥–∞ param2 –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è).

    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Ä–µ–º–µ–Ω –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è.
    """
    service_times = []
    if mode == 'uniform':
        for _ in range(num_people):
            # —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ –æ—Ç param1 –¥–æ param2
            st = random.uniform(param1, param2)
            service_times.append(st)
    elif mode == 'exp':
        mu = param1
        for _ in range(num_people):
            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π —Å–ª—É—á–∞–π–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω—ã
            r = random.random()
            # –º–µ—Ç–æ–¥ –æ–±—Ä–∞—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π: st = -ln(1 - r) / mu
            st = -math.log(r) / mu
            service_times.append(st)
    else:
        raise ValueError("Unknown mode. Use 'uniform' or 'exp'.")
    return service_times

# –ü–ê–†–ê–ú–ï–¢–†–´ –ú–û–î–ï–õ–ò
T = 60                # –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 60 "–º–∏–Ω—É—Ç")
arrivals_min = 0      # –º–∏–Ω–∏–º—É–º —á–µ–ª–æ–≤–µ–∫ –≤ –º–∏–Ω—É—Ç—É
arrivals_max = 5      # –º–∞–∫—Å–∏–º—É–º —á–µ–ª–æ–≤–µ–∫ –≤ –º–∏–Ω—É—Ç—É

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ—Ç–æ–∫
arrivals = generate_arrivals(T, arrivals_min, arrivals_max)

# –ü–æ–¥—Å—á–∏—Ç–∞–µ–º –æ–±—â–µ–µ —á–∏—Å–ª–æ –ª—é–¥–µ–π
total_people = sum(arrivals)

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Ä–µ–º—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
# 1) –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ [2, 5] —Å–µ–∫—É–Ω–¥ (–∫–∞–∫ –ø—Ä–∏–º–µ—Ä)
service_times_uniform = generate_service_times(total_people, mode='uniform', param1=2.0, param2=5.0)
# 2) –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ (—Å—Ä–µ–¥–Ω–µ–µ 1/mu); –ø—É—Å—Ç—å mu=1/3 -> —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è = 3 —Å–µ–∫
service_times_exp = generate_service_times(total_people, mode='exp', param1=(1/3))

# --- –ü–û–°–¢–†–û–ï–ù–ò–ï –ì–†–ê–§–ò–ö–û–í ---

# 1. –ì—Ä–∞—Ñ–∏–∫ –ø–æ—Ç–æ–∫–∞: —Å–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π –ø—Ä–∏—à–ª–æ –≤ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
plt.figure(figsize=(10, 6))

plt.subplot(2,2,1)
plt.plot(range(T), arrivals, marker='o')
plt.title("–ü—Ä–∏—Ö–æ–¥ –ª—é–¥–µ–π –∑–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É")
plt.xlabel("–ú–∏–Ω—É—Ç–∞")
plt.ylabel("–ß–∏—Å–ª–æ —á–µ–ª–æ–≤–µ–∫")
plt.grid(True)

# 2. –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª—é–¥–µ–π (–ø–æ –º–∏–Ω—É—Ç–∞–º)
plt.subplot(2,2,2)
plt.hist(arrivals, bins=range(arrivals_min, arrivals_max+2), align='left', edgecolor='black')
plt.title("–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ (—á–∏—Å–ª–æ —á–µ–ª–æ–≤–µ–∫ –≤ –º–∏–Ω—É—Ç—É)")
plt.xlabel("–ß–∏—Å–ª–æ –ø—Ä–∏—à–µ–¥—à–∏—Ö –∑–∞ –º–∏–Ω—É—Ç—É")
plt.ylabel("–ß–∞—Å—Ç–æ—Ç–∞")
plt.grid(True)

# 3. –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è [2..5]
plt.subplot(2,2,3)
plt.hist(service_times_uniform, bins=20, edgecolor='black', color='skyblue')
plt.title("–í—Ä–µ–º—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (Uniform [2..5] —Å–µ–∫—É–Ω–¥)")
plt.xlabel("–í—Ä–µ–º—è, —Å–µ–∫")
plt.ylabel("–ß–∞—Å—Ç–æ—Ç–∞")
plt.grid(True)

# 4. –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
plt.subplot(2,2,4)
plt.hist(service_times_exp, bins=20, edgecolor='black', color='lightgreen')
plt.title("–í—Ä–µ–º—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (Exp —Å–æ —Å—Ä. ‚âà 3 —Å–µ–∫)")
plt.xlabel("–í—Ä–µ–º—è, —Å–µ–∫")
plt.ylabel("–ß–∞—Å—Ç–æ—Ç–∞")
plt.grid(True)

plt.tight_layout()
plt.show()

print(f"–í—Å–µ–≥–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –ª—é–¥–µ–π –∑–∞ {T} –º–∏–Ω—É—Ç: {total_people}")



# 1. –§—É–Ω–∫—Ü–∏—è generate_arrivals: –ù–∞ –≤—Ö–æ–¥ –ø–æ–¥–∞—ë—Ç—Å—è T (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ ¬´–µ–¥–∏–Ω–∏—Ü –≤—Ä–µ–º–µ–Ω–∏¬ª, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º–∏–Ω—É—Ç) –∏ –≥—Ä–∞–Ω–∏—Ü—ã arrivals_min, arrivals_max.
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–ª–∏–Ω–æ–π T, –≥–¥–µ —ç–ª–µ–º–µ–Ω—Ç i —Ä–∞–≤–µ–Ω –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø—Ä–∏—à–µ–¥—à–∏—Ö –ª—é–¥–µ–π –≤ –º–∏–Ω—É—Ç—É i.

# 2. –§—É–Ω–∫—Ü–∏—è generate_service_times: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö). –ü–∞—Ä–∞–º–µ—Ç—Ä mode –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è: 'uniform' –∏–ª–∏ 'exp'.
# –î–ª—è 'uniform', –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º random.uniform(param1, param2). –ï—Å–ª–∏ –∑–∞–¥–∞—Ç—å param1=2.0 –∏ param2=5.0, —Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç 2 –¥–æ 5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞.
# –î–ª—è 'exp', –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –°–í —á–µ—Ä–µ–∑ ln(ùëü)/ùúá. –ï—Å–ª–∏ mu=1/3, —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –±—É–¥–µ—Ç 3 —Å–µ–∫—É–Ω–¥—ã.

# –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å: –ó–∞–¥–∞—ë–º T=60 (–∏–º–∏—Ç–∞—Ü–∏—è 60 ¬´–º–∏–Ω—É—Ç¬ª), arrivals_min=0, arrivals_max=5. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º arrivals ‚Äî –º–∞—Å—Å–∏–≤ —á–∏—Å–µ–ª, —Å–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫ –ø—Ä–∏—à–ª–æ –≤ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É.
# –°—É–º–º–∏—Ä—É–µ–º, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –æ–±—â–µ–µ —á–∏—Å–ª–æ –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ. –î–µ–ª–∞–µ–º –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è: —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ –∏ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ, —á—Ç–æ–±—ã —Å—Ä–∞–≤–Ω–∏—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:
    # –ü–µ—Ä–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞: –ª–∏–Ω–∏—è, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è –∫–æ–ª–µ–±–∞–Ω–∏—è —á–∏—Å–ª–∞ –ø—Ä–∏—à–µ–¥—à–∏—Ö –ª—é–¥–µ–π –ø–æ–º–∏–Ω—É—Ç–Ω–æ.
    # –í—Ç–æ—Ä–∞—è: –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è ¬´—á–∏—Å–ª–∞ –ª—é–¥–µ–π –≤ –º–∏–Ω—É—Ç—É¬ª. –ü–æ–∫–∞–∂–µ—Ç, –∫–∞–∫ —á–∞—Å—Ç–æ –≤—ã–ø–∞–¥–∞–µ—Ç 0, 1, 2‚Ä¶ 5 —á–µ–ª–æ–≤–µ–∫.
    # –¢—Ä–µ—Ç—å—è: –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ ¬´—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ¬ª –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è.
    # –ß–µ—Ç–≤—ë—Ä—Ç–∞—è: –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ ¬´—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ¬ª –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è.
# –í —Ä–µ–∞–ª—å–Ω–æ–π –∑–∞–¥–∞—á–µ (–º–æ–¥–µ–ª–∏) —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–æ–º —Å–ª—É–∂–∞—Ç –≤—Ö–æ–¥–æ–º –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –æ—á–µ—Ä–µ–¥–µ–π (—Å–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π –æ–∂–∏–¥–∞–µ—Ç, –∫–æ–≥–¥–∞ —Ç—É—Ä–Ω–∏–∫–µ—Ç –∑–∞–Ω—è—Ç –∏ —Ç.–¥.).
# –ù–æ —É–∂–µ –∑–¥–µ—Å—å –º—ã –≤–∏–¥–∏–º, –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø–æ—Ç–æ–∫ –∏ –∫–∞–∫–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ä–µ–º—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è—Ö.